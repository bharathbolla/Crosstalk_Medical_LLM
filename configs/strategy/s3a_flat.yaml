strategy:
  name: "S3a_shared_private_flat"
  type: "multi_task"
  description: "Shared (r=16) + Private (r=8) adapters with fusion."

  adapter:
    shared: true
    shared_rank: 16
    private: true
    private_rank: 8
    fusion: "gated"  # lightweight gated residual fusion

  gradient:
    conflict_resolution: "pcgrad"
    log_conflicts: true
    log_conflict_frequency: 100  # every 100 steps

  multitask:
    sampling: "temperature"
    temperature: 2.0
    loss_weighting: "uncertainty"

  training:
    epochs: 5
    early_stopping_patience: 3
    eval_every_n_steps: 200
    checkpoint_every_n_steps: 200
    learning_rate: 2e-5
    warmup_ratio: 0.1

  logging:
    token_logging: true
    log_tokens_per_task: true
    log_gradient_conflicts: true
    wandb_project: "medical-mtl"
